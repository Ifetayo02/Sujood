<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Profile — Sujood</title>

	<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700&display=swap"
		rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

	<style>
		:root {
			--primary-dark: #064e3b;
			--primary-main: #10b981;
			--primary-light: #ecfdf5;
			--text-muted: #64748b;
			--bg-soft: #f8fafc;
		}

		body {
			font-family: 'Plus Jakarta Sans', sans-serif;
			background-color: var(--bg-soft);
			color: #1e293b;
		}

		/* Navbar Glass Effect */
		.navbar-glass {
			background: rgba(6, 78, 59, 0.95);
			backdrop-filter: blur(10px);
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
		}

		.brand-text {
			font-weight: 800;
			letter-spacing: -0.5px;
			font-size: 1.25rem;
			color: white;
		}

		.logo-circle {
			background: white;
			color: #064e3b;
			width: 35px;
			height: 35px;
			border-radius: 12px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-weight: 800;
		}

		/* Modern Card Style */
		.card-modern {
			background: white;
			border: 1px solid rgba(255, 255, 255, 0.6);
			border-radius: 24px;
			padding: 32px;
			box-shadow: 0 10px 30px -10px rgba(16, 185, 129, 0.1);
			margin-bottom: 24px;
		}

		/* Avatar Styling */
		.avatar-box {
			width: 110px;
			height: 110px;
			border-radius: 50%;
			background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
			display: flex;
			align-items: center;
			justify-content: center;
			color: #64748b;
			font-size: 52px;
			margin: 0 auto;
			border: 5px solid white;
			box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
		}

		/* Custom Buttons */
		.btn-primary-gradient {
			background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-main) 100%);
			color: white;
			border: none;
			transition: all 0.2s;
		}

		.btn-primary-gradient:hover {
			color: white;
			transform: translateY(-2px);
			box-shadow: 0 10px 20px -5px rgba(16, 185, 129, 0.4);
		}

		/* Section Headings */
		.section-title {
			font-size: 0.85rem;
			text-transform: uppercase;
			letter-spacing: 1px;
			font-weight: 700;
			color: var(--text-muted);
			margin-bottom: 1rem;
			display: block;
		}

		/* Danger Zone */
		.card-danger {
			border: 1px solid rgba(220, 53, 69, 0.15);
			background: #fff5f5;
		}
	</style>
</head>

<body>

	<nav class="navbar navbar-expand-lg navbar-dark navbar-glass sticky-top py-3">
		<div class="container">
			<a class="navbar-brand d-flex align-items-center gap-2" href="dashboard.html">
				<span class="logo-circle">S</span>
				<span class="brand-text">Sujood</span>
			</a>
			<div class="ms-auto d-flex gap-2">
				<a href="dashboard.html" class="btn btn-sm btn-outline-light rounded-pill px-4">Dashboard</a>
			</div>
		</div>
	</nav>

	<main class="container py-5">
		<div class="row justify-content-center">
			<div class="col-lg-6 col-md-8">

				<div class="card-modern text-center position-relative">
					<div class="avatar-box mb-3">
						<i class="bi bi-person-fill"></i>
					</div>
					<h4 class="fw-bold mb-1" id="display-name">Loading...</h4>
					<div class="text-muted small mb-4" id="display-email">user@example.com</div>

					<button onclick="" class="btn btn-light rounded-pill border px-4 btn-sm text-danger fw-bold"
						data-bs-toggle="modal" data-bs-target="#logoutModal">
						<i class="bi bi-box-arrow-right me-2"></i>Log Out
					</button>
				</div>

				<span class="section-title ms-2">General Settings</span>
				<div class="card-modern">
					<div class="d-flex align-items-center mb-4">
						<div class="bg-success bg-opacity-10 text-success rounded-circle d-flex align-items-center justify-content-center me-3"
							style="width: 40px; height: 40px;">
							<i class="bi bi-person-lines-fill"></i>
						</div>
						<h5 class="fw-bold mb-0">Edit Profile</h5>
					</div>

					<form onsubmit="updateProfile(event)">
						<div class="mb-4">
							<label class="form-label small fw-bold text-muted">Full Name</label>
							<input type="text" id="input-name" class="form-control form-control-lg fs-6"
								placeholder="Enter your name">
						</div>
						<div class="d-grid">
							<button type="submit" class="btn btn-primary-gradient rounded-pill py-2 fw-bold">Update
								Profile</button>
						</div>
					</form>
				</div>

				<span class="section-title ms-2">Security</span>
				<div class="card-modern">
					<div class="d-flex align-items-center mb-4">
						<div class="bg-warning bg-opacity-10 text-warning rounded-circle d-flex align-items-center justify-content-center me-3"
							style="width: 40px; height: 40px;">
							<i class="bi bi-key-fill"></i>
						</div>
						<h5 class="fw-bold mb-0">Change Password</h5>
					</div>

					<form onsubmit="changePassword(event)">
						<div class="mb-3">
							<label class="form-label small fw-bold text-muted">Current Password</label>
							<input type="password" class="form-control" placeholder="••••••••">
						</div>
						<div class="mb-3">
							<label class="form-label small fw-bold text-muted">New Password</label>
							<input type="password" class="form-control" placeholder="New password">
						</div>
						<div class="mb-4">
							<label class="form-label small fw-bold text-muted">Confirm Password</label>
							<input type="password" class="form-control" placeholder="Confirm new password">
						</div>
						<div class="d-grid">
							<button type="submit" class="btn btn-outline-dark rounded-pill py-2 fw-bold">Update
								Password</button>
						</div>
					</form>
				</div>

				<span class="section-title ms-2 text-danger">Danger Zone</span>
				<div class="card-modern card-danger">
					<div class="d-flex align-items-start gap-3">
						<div class="text-danger fs-4 mt-1"><i class="bi bi-exclamation-triangle-fill"></i></div>
						<div>
							<h6 class="fw-bold text-danger mb-2">Delete Account</h6>
							<p class="small text-muted mb-3">Deleting your account is permanent. All your data will be
								wiped.</p>
							<button onclick="deleteAccount()"
								class="btn btn-danger btn-sm rounded-pill px-4 fw-bold">Yes, Delete My Account</button>
						</div>
					</div>
				</div>

			</div>
		</div>
	</main>
	<div class="modal fade" id="logoutModal" tabindex="-1" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" style="max-width: 350px;">
			<div class="modal-content border-0 shadow-lg" style="border-radius: 24px; overflow: hidden;">

				<div class="modal-body p-4 text-center">
					<div class="bg-danger bg-opacity-10 text-danger rounded-circle d-inline-flex align-items-center justify-content-center mb-3"
						style="width: 60px; height: 60px;">
						<i class="bi bi-box-arrow-right fs-3"></i>
					</div>

					<h5 class="fw-bold mb-2">Log Out</h5>
					<p class="text-muted small mb-4">Are you sure you want to end your session?</p>

					<div class="d-flex gap-2 justify-content-center">
						<button type="button" class="btn btn-light rounded-pill px-4 fw-bold w-50"
							data-bs-dismiss="modal">Cancel</button>
						<button type="button" onclick="confirmLogout()"
							class="btn btn-danger rounded-pill px-4 fw-bold w-50">Log Out</button>
					</div>
				</div>

			</div>
		</div>
	</div>


	<footer class="py-4 text-center">
		<div class="container">
			<small class="text-muted">© 2025 Sujood. All rights reserved.</small>
		</div>
	</footer>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<script>
		window.onload = function () {
			const currentUser = JSON.parse(localStorage.getItem('currentUser')) || {};

			if (currentUser.name) {
				document.getElementById('display-name').textContent = currentUser.name;
				document.getElementById('input-name').value = currentUser.name;
			} else {
				document.getElementById('display-name').textContent = "Guest User";
				document.getElementById('input-name').value = "";
			}

			if (currentUser.maily) {
				document.getElementById('display-email').textContent = currentUser.maily;
			}
		};
		function updateProfile(e) {
			e.preventDefault();

			const newName = document.getElementById('input-name').value;
			let currentUser = JSON.parse(localStorage.getItem('currentUser')) || {};

			if (!newName.trim()) {
				alert("Please enter a valid name.");
				return;
			}

			currentUser.name = newName;
			localStorage.setItem('currentUser', JSON.stringify(currentUser));

			alert('Profile updated successfully!');
			location.reload();
		}
		function deleteAccount() {
			if (confirm("Are you sure? This will delete all your journal entries and settings permanently.")) {
				localStorage.removeItem('currentUser');
				localStorage.removeItem('journalEntries');
				window.location.href = "index.html";
			}
		}

	</script>
	<script type="module">
		import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
		import { getAuth, createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

		const firebaseConfig = {
			apiKey: "AIzaSyBe8v6EvUu2ewi_FDJvrpqdUx0t-anKsAA",
			authDomain: "sujood-868bf.firebaseapp.com",
			projectId: "sujood-868bf",
			storageBucket: "sujood-868bf.firebasestorage.app",
			messagingSenderId: "370785864080",
			appId: "1:370785864080:web:15c0ced9fea8e9e7fd0b15",
			measurementId: "G-R4PSSZT0YV"
		};

		const app = initializeApp(firebaseConfig);

		const auth = getAuth(app);

		function confirmLogout() {
			signOut(auth).then(() => {
				window.location.href = "sign-in.html";
			}).catch((error) => {
				// An error happened.
			});
		}
		window.confirmLogout = confirmLogout;
	</script>

</body>

</html>